# Тема: Оптимізація зображень для Web та мобільних пристроїв

## Мета
1.  Ознайомитися із методами стиснення зображень та їхнім впливом на якість.
2.  Навчитися визначати оптимальний баланс між якістю та розміром файлу.
3.  Ознайомитися із різними типами стиснення: без втрат (lossless) та з втратами (lossy).
4.  Дослідити вплив зміни розміру на якість зображення та вагу файлу.
5.  Навчитися адаптувати зображення для різних цільових застосувань:
    * **Веб:** оптимізація для швидкого завантаження.
    * **Мобільні пристрої:** зменшені розміри, ефективне стиснення.
    * **Retina-дисплеї:** 2x, 3x версії для збереження якості.

---

## Теоретична частина

**Squoosh** — це веб-додаток від Google для стиснення, конвертації та оптимізації зображень без встановлення додаткового програмного забезпечення. Усі операції виконуються прямо в браузері, що робить процес швидким та безпечним, оскільки файли не надсилаються на сервер.

Після завантаження зображення Squoosh автоматично підключає потрібні кодеки (JPEG, MozJPEG, WebP, AVIF, OxiPNG тощо), реалізовані через WebAssembly. Завдяки цьому обробка відбувається локально: інструмент дозволяє застосовувати стиснення, змінювати розмір, регулювати якість та конвертувати між форматами. Для зручності реалізовано порівняння «до/після» за допомогою інтерактивного повзунка, що дозволяє оцінити зміни перед збереженням оптимізованого файлу.

### Типи стиснення
Squoosh підтримує різні типи стиснення, які можна розділити на дві основні категорії:

1.  **Стиснення без втрати (Lossless)**
    * Зберігає 100% деталізації та якості.
    * Ідеально для графіки, іконок, креслень та зображень, де важлива абсолютна точність кольорів.
    * *Формати:* PNG, WebP (lossless).
2.  **Стиснення з втратою (Lossy)**
    * Дозволяє значно зменшити розмір файлу за рахунок часткової втрати якості (видалення інформації, яку око важко розрізняє).
    * *Формати:* MozJPEG, WebP (lossy), AVIF.

### Адаптація та Retina
Одним із найефективніших методів зменшення ваги файлу є зменшення його роздільності (кількості пікселів). Розмір зображення підбирається відповідно до його призначення.

* **Retina-дисплеї:** Дисплеї з високою щільністю пікселів потребують зображень збільшеної роздільності (**2x, 3x**) для збереження високої чіткості.
* **HTML:** У веб-розробці використовується атрибут `srcset`. Він дозволяє браузеру автоматично вибрати найбільш відповідний файл залежно від роздільності екрана.

---

## Практична частина: Робота з Squoosh

**Завдання:** Використовуючи веб-додаток [squoosh.app](https://squoosh.app/), дослідити методи стиснення та підготувати зображення для публікації.

### Етап 1: Підготовка
1.  Підготуйте якісне вихідне зображення (фотографію великого розміру, наприклад, 1920x1080 px).
2.  Відкрийте [squoosh.app] та перетягніть туди файл.
3.  Ознайомтеся з інтерфейсом: ліворуч — оригінал, праворуч — результат. Використовуйте повзунок для порівняння.

### Етап 2: Порівняння Lossless та Lossy
1.  **Стиснення без втрат:**
    * Оберіть формат **OxiPNG**.
    * Зафіксуйте розмір файлу.
    * *Примітка:* Цей метод зберігає ідеальну чіткість.
2.  **Стиснення з втратами:**
    * Змініть формат на **MozJPEG**.
    * Встановіть якість (**Quality**) на **75%**.
    * Порівняйте розмір з OxiPNG.
    * Зменшуйте якість до **30%**, щоб побачити появу артефактів.

### Етап 3: Сучасні формати (WebP та AVIF)
1.  Оберіть формат **WebP**. Знайдіть баланс (зазвичай 75-80%), де зображення виглядає ідентично оригіналу, але файл значно менший.
2.  Оберіть формат **AVIF** (найсучасніший кодек).
    * Порівняйте AVIF (Quality 50%) з MozJPEG (Quality 50%).
    * AVIF зазвичай забезпечує виграш у вазі на 30-50% при тій самій візуальній якості.

### Етап 4: Зміна розміру (Resizing) та Retina
1.  Увімкніть перемикач **Resize**.
2.  Встановіть ширину, наприклад, `800px`.
3.  **Створення Retina-сету:**
    * Збережіть велике зображення (оптимізоване) як `image@2x.jpg` (для Retina).
    * Зменште розмір рівно в 2 рази (50%) і збережіть як `image@1x.jpg` (для звичайних екранів).

### Зразок таблиці результатів

| Метод / Формат | Розмір | Зменшення (%) | Якість (1-10) | Примітка |
| :--- | :--- | :--- | :--- | :--- |
| Оригінал (JPG) | 2.5 MB | 0% | 10 | Вихідний файл |
| OxiPNG (Lossless)| 2.1 MB | ~16% | 10 | Максимальна якість |
| MozJPEG (Q: 75) | 450 KB | ~82% | 9 | Стандарт для фото |
| WebP (Q: 75) | 320 KB | ~87% | 9 | Оптимально для Web |
| AVIF (Q: 60) | 180 KB | ~93% | 8.5 | Найкраще стиснення |
| Resize (50%) | 85 KB | ~97% | 9 | Для мобільних |

---

## Приклад коду для розробника

Приклад використання атрибуту `srcset` для підключення різних версій зображень (1x та 2x):

```html
<img src="photo@1x.jpg" 
     srcset="photo@1x.jpg 1x, photo@2x.jpg 2x" 
     alt="Опис зображення"
     loading="lazy">
